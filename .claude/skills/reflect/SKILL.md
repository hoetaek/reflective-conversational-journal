---
name: reflect
description: |
  자유 노트(F)를 성찰(R)로 정리. AI가 성찰할 만한 내용을 감지하면 자동 실행.
  트리거: (1) 자유 노트/대화에서 성찰 가능한 내용 감지 시 AI가 자동 제안,
  (2) "/reflect" 명령어로 수동 실행,
  (3) daily-wrap 흐름에서 성찰 누락 시간대 보충,
  (4) 시간대 전환 시 이전 시간대 성찰 체크
---

# Reflect Skill

자유 노트(F)와 대화 내용을 성찰(R) 섹션으로 정리한다.

## 트리거 조건

> **핵심 질문: "이 내용에서 배운 점(So What)이나 다음에 다르게 할 것(Now What)을 뽑아낼 수 있는가?"**

이 질문에 "예"가 되는 대표적 경우:
- **시행착오/실수**: 뭔가 안 됐거나 틀렸던 경험
- **외부 피드백**: 팀장님, 동료, 사용자 등에게서 받은 정보

다음은 성찰 대상이 **아님**:
- 단순 완료 기록 ("PR 올림", "Todoist 등록")
- 정보 조회 ("이슈 확인", "상태 확인")
- 일상 기록 ("머리깎기", "안경 사기")

## 워크플로우

### 1. 성찰 대상 감지

자유 노트(F)와 대화 내용을 스캔하여 트리거 조건에 해당하는 항목을 식별한다.

### 2. 프레임워크 선택

`frameworks/` 디렉토리에서 적합한 프레임워크를 선택한다.
- 각 프레임워크 파일의 **적합한 상황** 섹션을 보고 매칭
- 여러 프레임워크가 해당되면 가장 적합한 1개 선택
- 애매하면 사용자에게 질문

**프레임워크 로드 방법:**
1. `frameworks/` 디렉토리의 모든 `.md` 파일을 Glob으로 스캔
2. 각 파일의 "적합한 상황" 섹션으로 매칭
3. 매칭된 프레임워크 파일을 Read해서 구조 확인
4. 해당 구조로 성찰 작성

### 3. 대화형 성찰

선택된 프레임워크의 구조에 따라 사용자와 대화하며 성찰을 정리한다.
- AI가 초안을 만들지 않음 — 질문으로 유도
- 사용자의 언어와 표현 그대로 기록
- "별로", "잘 모르겠어" → 존중하고 넘어가기

### 4. 저널 업데이트

해당 시간대의 성찰(R) 섹션에 프레임워크 구조로 기록한다.
- 플레이스홀더(`[REFLECTION_PLACEHOLDER]`) 교체
- 이미 성찰이 있으면 추가 (덮어쓰지 않음)

## 시간대 전환 성찰 체크

세션 시작 시 현재 시간대가 이전 시간대와 다를 때 (예: 오전→오후, 오후→저녁), **이전 시간대의 R 섹션이 비어있으면** 가볍게 성찰을 제안한다.

### 체크 조건

1. 이전 시간대의 **F(자유 노트)에 내용이 있는데** R(성찰)이 비어있거나 플레이스홀더인 경우
2. F에도 내용이 없으면 → 성찰 대상 없음, 스킵

### 제안 방식

- 가벼운 질문 1개로 유도: "오전에 ~했는데, 뭔가 느낀 거 있어?"
- F의 내용을 구체적으로 언급해서 회상을 도와줌
- **"없어", "별로" → 즉시 존중하고 넘어감** (강요 금지)
- 성찰 대상이 있으면 → 위 워크플로우(프레임워크 선택 → 대화형 성찰 → 저널 업데이트) 진행

### 예시

```
이전 시간대 F: "doist v0.5.0 업그레이드 — 새 기능 파악 후 스킬 업데이트"
→ "오전에 doist 업그레이드하면서 스킬 업데이트까지 했잖아. 그 과정에서 뭔가 느낀 거 있어?"

이전 시간대 F: (비어있음)
→ (스킵, 아무 질문 안 함)
```

## 원칙

- AI가 해석하지 않고 질문으로 유도
- 사용자가 말하지 않은 내용 추측 금지
- 프레임워크의 모든 항목을 채울 필요 없음 — 의미 있는 것만
- 부담 없는 자연스러운 대화

## 프레임워크 확장

새 프레임워크 추가 시:
1. `frameworks/` 디렉토리에 `.md` 파일 추가
2. 파일에 "적합한 상황", "구조", "저널 기록 형식" 섹션 포함
3. SKILL.md 수정 불필요 — 자동으로 인식됨
